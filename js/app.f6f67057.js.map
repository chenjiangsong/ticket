{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?be01","webpack:///./src/core/util.js","webpack:///./src/core/constants.js","webpack:///./src/core/seat.js","webpack:///./src/core/row.js","webpack:///./src/core/ticketManager.js","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/App.vue?12d5"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Appvue_type_template_id_5c550322_render","_vm","this","_h","$createElement","_c","_self","attrs","id","staticClass","shadow","inline","label","min","max","size","model","callback","$$v","num","expression","on","click","buy","_v","autoBuy","body-style","width","height","staticRenderFns","getRandom","limit","Math","floor","random","getSum","arr","reduce","prev","acc","angle","PI","AREA","_ANGLE","SEAT_NUMBER_EVERY_ROW","Array","from","map","N","RENDER_CONFIG","A","color","B","C","D","DPR","Seat","_ref","area","rowIndex","seatIndex","ctx","canvas","zeroPoint","classCallCheck","select","lastSelected","_this$zeroPoint","x","y","beginPath","seatNum","config","startAngle","endAngle","arc","fillStyle","strokeStyle","fill","closePath","stroke","SeatRow","seats","selectIndex","freeSeatsNum","seatMap","weight","normalSeat","goldSeat","seat","render","updateSeatMap","seatMapStr","join","findStr","substr","_this","pendingSeat","startIndex","selected","_loop","keyIndex","keySeat","find","console","error","TicketManager","rows","row","clearRect","forEach","seatsNum","free","getAllFreeSeatNum","alert","distribute","getFreeNum","sum","tmpRegion","hasGoldSeat","rowMap","_row$getAvailableSeat","getAvailableSeatsCount","_objectSpread","weightMap","count","region","seatsHalfA","seatsHalfB","buyTickets","tmp","_region","slicedToArray","start","end","keyRow","lockSeat","repaint","Appvue_type_script_lang_js_","rowsAll","ticketManager","mounted","document","getElementById","getContext","ticketManager_TicketManager","index","row_SeatRow","seat_Seat","addSeat","addRow","methods","_this2","interval","setInterval","ret","main","src_Appvue_type_script_lang_js_","component","componentNormalizer","App","Vue","use","ElementUI","productionTip","h","$mount","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_less___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/app.f6f67057.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('header',{staticClass:\"header\"},[_c('div',{staticClass:\"purchase-board\"},[_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('el-form',{attrs:{\"inline\":true}},[_c('el-form-item',{attrs:{\"label\":\"请输入购票数量\"}},[_c('el-input-number',{attrs:{\"min\":1,\"max\":5,\"label\":\"请输入购票数量\",\"size\":\"mini\"},model:{value:(_vm.num),callback:function ($$v) {_vm.num=$$v},expression:\"num\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":_vm.buy}},[_vm._v(\"购票\")]),_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":_vm.autoBuy}},[_vm._v(\"自动随机购票\")])],1)],1)],1)],1)]),_c('el-card',{attrs:{\"body-style\":\"overflow: scroll\"}},[_c('canvas',{attrs:{\"id\":\"hall\",\"width\":\"2000\",\"height\":\"1000\"}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export function getRandom(limit) {\n  return Math.floor(Math.random() * limit) + 1\n}\n\nexport function getSum(arr) {\n  return arr.reduce((prev, acc) => {\n    return prev + acc\n  }, 0)\n}\n\nexport function angle (num) {\n  return Math.PI / 180 * num\n}","export const ANGLE = {\n  [45]: Math.PI / 4,\n  [90]: Math.PI / 2,\n  [180]: Math.PI,\n  [360]: Math.PI * 2\n}\n\nexport const HALL_RADIUS = 900\n\nexport const EXTRA_RADIUS = 380\n\nexport const SEAT_RADIUS_HALF = 20  // 座位的直线边长度\n\nexport const AREA = [\n  'A', 'B', 'C', 'D'\n]\n\nexport const SEAT_NUMBER_EVERY_ROW = Array.from({ length: 26 }).map((N, i) => 50 + 2 * i)\n\nexport const RENDER_CONFIG = {\n  'A': {\n    angle: 178,\n    color: '#FFFF99'\n  },\n  'B': {\n    angle: 224,\n    color: '#FF6666'\n  },\n  'C': {\n    angle: 270,\n    color: '#99CCFF', \n  },\n  'D': {\n    angle: 316,\n    color: '#FF99CC'\n  }\n}","import { angle } from './util'\nimport { RENDER_CONFIG } from './constants'\n\n// const DPR = window.devicePixelRatio\nconst DPR = 1\n\nlet id = 0\n\n\n\nexport default class Seat {\n  constructor ({ area, rowIndex, seatIndex, canvas, ctx, zeroPoint}) {\n    this.id = id++\n    this.select = false\n    this.rowIndex = rowIndex\n    this.seatIndex = seatIndex\n    this.area = area\n\n    this.ctx = ctx\n    this.zeroPoint = zeroPoint\n    this.lastSelected = false\n  }\n\n  // 座位选中\n  selected () {\n    this.select = true\n    this.lastSelected = true\n  }\n\n  // 绘制座位\n  render () {\n    const ctx = this.ctx\n    const { x, y } = this.zeroPoint\n    const { rowIndex, seatIndex } = this \n    ctx.beginPath()\n\n    let seatNum = 50 + 2 * (rowIndex - 1)\n    const config = RENDER_CONFIG[this.area]\n    const startAngle = angle(config.angle) + angle(45) / seatNum * (seatIndex - 1)\n    const endAngle = angle(config.angle) + angle(45) / seatNum * (seatIndex)\n    ctx.arc(x * DPR, y * DPR, (210 + 15 * (rowIndex - 1)) * DPR, startAngle, endAngle)\n    ctx.arc(x * DPR, y * DPR, (210 + 15 * (rowIndex) - 2) * DPR, endAngle, startAngle, true)\n    ctx.fillStyle = config.color\n    ctx.strokeStyle = '#AAAAAA'\n\n    if (this.lastSelected) {\n      ctx.fillStyle = '#333333'\n    }\n\n    if (this.select) {\n      ctx.fill()\n    }\n    ctx.closePath()\n    ctx.stroke()\n\n    this.lastSelected = false\n  }\n}","import { getRandom } from './util'\n\nlet id = 0\n\nexport default class SeatRow {\n  constructor ({ rowIndex, area}) {\n    this.id = id++\n    this.seats = []\n    this.selectIndex = 0\n    this.freeSeatsNum = 0 // 当前组剩余空座数量\n    this.seatMap = []\n    this.weight = 0\n    this.normalSeat = []\n    this.area = area\n  \n\n    this.rowIndex = rowIndex\n    this.seatIndex = 1\n\n    this.goldSeat = []\n    this.normalSeat = []\n  }\n\n  // 添加座位并初始绘制\n  addSeat (seat) {\n    this.seats.push(seat)\n    this.freeSeatsNum++\n    seat.render()\n    this.updateSeatMap()\n  }\n\n  getFreeNum () {\n    return this.freeSeatsNum\n  }\n\n  // 获取可被预定的座位数量\n  getAvailableSeatsCount (num) {\n\n    if (this.freeSeatsNum < num)  {\n      return {\n        goldSeat: this.goldSeat,\n        normalSeat: this.normalSeat\n      }\n    }\n\n    // 将本排的座位按字符串形式展示： 101010101111\n    let seatMapStr = this.seatMap.join('')\n\n    // 待查询空座以 00000 形式展示\n    let findStr = ''\n    for (let i = 0; i < num; i++) {\n      findStr += '0'\n    }\n\n    for (let i = 0; i < this.seats.length; i++) {\n      if (seatMapStr.substr(i, num) === findStr) {\n        this.normalSeat.push(i+1)\n        // 判断是否是黄金座位\n        if (\n             (seatMapStr.substr(i-1, num) !== findStr && seatMapStr.substr(i+1, num) !== findStr)\n          || (i === 0 && seatMapStr.substr(i+1, num) !== findStr)\n          || (i === this.seats.length - 1 && seatMapStr.substr(i-1, num) !== findStr)\n          ) {\n          this.goldSeat.push(i+1)\n        }\n      }\n    }\n\n    return {\n      goldSeat: this.goldSeat,\n      normalSeat: this.normalSeat\n    }\n  }\n\n  // 锁定固定数量的座位\n  lockSeat (num) {\n\n    // 判断是否有黄金座位，优先分配\n    let pendingSeat = this.goldSeat.length ? this.goldSeat : this.normalSeat\n\n    // 在符合条件的座位里 随机抽取连号座位的第一个座\n    let random = getRandom(pendingSeat.length)\n    let startIndex = pendingSeat[random - 1]\n\n    let selected = []\n    for (let i = 0; i < num; i++) {\n      let keyIndex = startIndex++\n      let keySeat = this.seats.find(seat => seat.seatIndex === keyIndex)\n      if (keySeat) {\n        keySeat.selected()\n        this.freeSeatsNum--\n        selected.push(keySeat)\n      } else {\n        console.error('没找到的keyIndex', keyIndex)\n      }\n    }\n  }\n  \n  // 更新seatMap，还原goldSeat和normalSeat数组\n  updateSeatMap () {\n    this.seatMap = this.seats.map(seat => seat.select ? 1 : 0)\n    this.goldSeat = []\n    this.normalSeat = []\n  }\n\n}","import { getSum, getRandom } from './util'\n\nexport default class TicketManager {\n  constructor ({ ctx}) {\n    this.ctx = ctx\n    this.rows = []\n  }\n  \n  addRow (row) {\n    this.rows.push(row)\n  }\n\n  repaint () {\n    this.ctx.clearRect(0,0, 2000, 1000)\n    this.rows.forEach(row => {\n      row.updateSeatMap()\n      row.seats.forEach(seat => {\n        seat.render()\n      })\n    })\n  }\n\n  buyTickets (seatsNum) {\n    if (seatsNum < 1) return false\n\n    let free = this.getAllFreeSeatNum()\n    if (free < seatsNum) {\n      alert('座位不够啦')\n      return false\n    }\n    this.distribute(seatsNum)\n    return true\n  }\n\n\n  // 获取全场剩余空闲座位\n  getAllFreeSeatNum () {\n    return getSum(this.rows.map(row => row.getFreeNum()))\n  }\n  \n  distribute (seatsNum) {\n    let sum = 0\n    let tmpRegion = [0, 0]\n    let hasGoldSeat = false\n\n    let rowMap = this.rows.map(row => {\n      const { goldSeat, normalSeat } = row.getAvailableSeatsCount(seatsNum)\n\n      if (goldSeat.length) {\n        hasGoldSeat = true\n      }\n\n      return {\n        ...row,\n        goldSeat,\n        normalSeat\n      }\n\n    })\n    \n    let weightMap = []\n\n    rowMap.forEach(row => {\n      let count = hasGoldSeat ? row.goldSeat.length : row.normalSeat.length\n      if (count > 0) {\n        sum += count\n        let region = []\n        region[0] = tmpRegion[1] + 1\n        region[1] = tmpRegion[1] + count\n        tmpRegion = region\n        weightMap.push({\n          id: row.id,\n          region\n        })\n      }\n    })\n\n    if (sum < 1) {\n      const seatsHalfA = Math.floor(seatsNum / 2) + 1\n      const seatsHalfB = seatsNum - seatsHalfA\n\n      this.buyTickets(seatsHalfA)\n      this.buyTickets(seatsHalfB)\n      return \n    }\n\n    let random = getRandom(sum)\n\n    const tmp = weightMap.find(row => {\n      let { region } = row\n      let [start, end] = region\n      return start <= random && random <= end\n    })\n    const keyRow = this.rows.find(row => {\n      return row.id === tmp.id\n    })\n    keyRow.lockSeat(seatsNum)\n    this.repaint()\n  }\n}\n\n","<template>\n  <div id=\"app\">\n    <header class=\"header\">\n      <div class=\"purchase-board\">\n\n        <el-card shadow=\"never\">\n        <el-form :inline=\"true\" >\n          <el-form-item label=\"请输入购票数量\">\n            <el-input-number v-model=\"num\" :min=\"1\" :max=\"5\" label=\"请输入购票数量\" size=\"mini\"></el-input-number>\n          </el-form-item>\n          <el-form-item>\n            <el-button @click=\"buy\" size=\"mini\">购票</el-button>\n            <el-button @click=\"autoBuy\" size=\"mini\">自动随机购票</el-button>\n          </el-form-item>\n        </el-form>\n      </el-card>\n      </div>\n    </header>\n      \n    <el-card body-style=\"overflow: scroll\">\n      <canvas id=\"hall\" width=\"2000\" height=\"1000\"></canvas>\n    </el-card>\n  </div>\n</template>\n\n<script>\n\nimport Seat from './core/seat'\nimport SeatRow from './core/row'\nimport TicketManager from './core/ticketManager'\nimport { getRandom } from './core/util'\nimport { clearInterval } from 'timers';\nimport { AREA, SEAT_NUMBER_EVERY_ROW } from './core/constants'\n\nexport default {\n  data () {\n    return {\n      num: 5,\n      rowsAll: [],\n      ticketManager: null\n    }\n  },\n  mounted () {\n\n    let canvas = document.getElementById('hall')\n    let ctx = canvas.getContext('2d')\n\n    // 设定座位图圆心\n    let zeroPoint = {}\n    zeroPoint.x = 600\n    zeroPoint.y = 600\n\n    // 初始化 购票管理器\n    this.ticketManager = new TicketManager({ ctx })\n\n    // 按区域初始化座位\n    AREA.forEach(area => {\n      SEAT_NUMBER_EVERY_ROW.forEach((seatNum,index) => {\n        const rowIndex = index + 1\n        let row = new SeatRow({ area, rowIndex })\n        let count = 0\n        for (let i = 1; i <= seatNum; i++) {\n          let seat = new Seat({ area, rowIndex, seatIndex: i, ctx, zeroPoint })\n          row.addSeat(seat)\n        }\n        this.ticketManager.addRow(row)\n      })\n    })\n    \n  },\n  methods: {\n    buy () {\n      this.ticketManager.buyTickets(this.num)\n    },\n    autoBuy () {\n      let interval = setInterval(() => {\n        const ret = this.ticketManager.buyTickets(getRandom(5))\n        if (!ret) {\n          clearInterval(interval)\n        }\n      }, 200)\n    }\n  }\n}\n</script>\n<style lang=\"less\">\nbody{\n  padding: 0;\n  margin: 0;\n}\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\n#nav {\n  padding: 30px;\n  a {\n    font-weight: bold;\n    color: #2c3e50;\n    &.router-link-exact-active {\n      color: #42b983;\n    }\n  }\n}\n.seats{\n  border: 1px solid #333;\n}\n.hall-wrap{\n  width: 100%;\n  // padding: 20px;\n}\n.box{\n  width: 5px;\n  height: 5px;\n  background: #000;\n}\n.header{\n  display: flex;\n}\n.msg-board{\n  flex: 1;\n}\n.purchase-board{\n  flex: 1;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=5c550322&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\nimport App from './App.vue';\n\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\n\nVue.use(ElementUI);\n\nVue.config.productionTip = false;\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app');\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}